<!doctype html>
<html lang="en" data-layout="vertical" data-topbar="light" data-sidebar="dark" data-sidebar-size="sm-hover-active"
	data-sidebar-image="none" data-preloader="disable">

<head th:replace="fragments/administration/common :: adminHead"></head>

<body>

	<!-- Begin page -->
	<div id="layout-wrapper">

		<header th:replace="fragments/administration/common :: adminHeader"></header>
		<th:block th:replace="fragments/administration/common :: adminNav"></th:block>

		<div class="main-content">

			<div class="page-content">
				<div class="container-fluid">

					<div class="row">
						<div class="col-12">
							<div class="page-title-box d-sm-flex align-items-center justify-content-between">
								<h4 class="mb-sm-0">제품관리</h4>

								<div class="page-title-right">
									<ol class="breadcrumb m-0">
										<li class="breadcrumb-item"><a href="javascript: void(0);">제품관리</a></li>
										<li class="breadcrumb-item active">제품노출 순위관리</li>
									</ol>
								</div>

							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="card">
								<div class="card-header align-items-center d-flex">
									<h4 class="card-title mb-0 flex-grow-1">검색 필터</h4>
								</div>

								<div class="card-body">
									<p class="text-muted">
										# <code>분류선택</code> 을 통해 검색 후 인덱스 변경이 가능합니다.<br>
									</p>
									<div class="live-preview">
										<form id="sortFilterForm">
											<div class="row gy-2 gx-3 mb-3 align-items-center">
												<div class="col-sm-auto">
													<select class="form-select" id="bigSortSelect" name="bigId">
														<option value="">== 대분류 선택 ==</option>
														<th:block th:each="big : ${bigSortList}">
															<option th:value="${big.id}" th:text="${big.name}"
																th:selected="${bigId} == ${big.id}"></option>
														</th:block>
													</select>
												</div>
												<div class="col-sm-auto">
													<select class="form-select" id="middleSortSelect" name="middleId">
														<option value="">== 중분류 선택 ==</option>
														<!-- JS로 동적 로딩 -->
													</select>
												</div>
												<div class="col-sm-auto">
													<button type="submit" class="btn btn-primary">검색</button>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="card">
								<div class="card-header">
									<h4 class="card-title mb-0">히든바스 제품노출 순위관리</h4>
								</div>

								<div class="card-body">
									<p class="text-muted"># <code>드래그 앤 드랍</code>을 통해 제품의 표시순서를 변경할 수 있습니다.<br>
										# 변경 완료 후 <code>확인 버튼</code>클릭시 변경된 순서로 적용 됩니다.<br>
									<div class="col-sm-auto">
										<div>
											<button id="indexChangeBtn" class="btn btn-success">인덱스 변경</button>
										</div>
									</div>
									<div class="list-group col nested-list nested-sortable" id="productIndexList">
										<th:block th:each="product : ${productList}">
											<div class="list-group-item nested-1 sortable-items"
												th:data-id="${product.id}">
												<span>
													<i class="mdi mdi-folder fs-16 align-middle text-warning me-2"></i>
													<span th:text="${product.bigSort?.name}"></span>
													<span> &gt; </span>
													<span th:text="${product.middleSort?.name}"></span>
													<span> &gt; </span>
													<span th:text="${product.name}"></span>
													<span th:text="'(' + ${product.productCode} + ')'"></span>
												</span>
											</div>
										</th:block>
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<footer th:replace="fragments/administration/common :: adminFooter"></footer>
		</div>
	</div>


	<th:block th:replace="fragments/administration/common :: adminButton"></th:block>
	<div th:replace="fragments/administration/common :: adminTheme"></div>

	<th:block th:replace="fragments/administration/common :: adminScript"></th:block>
	<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"
		integrity="sha256-ipiJrswvAR4VAx/th+6zWsdeYmVae0iJuiR+6OqHJHQ=" crossorigin="anonymous"></script>
	<script src="/administration/assets/libs/sortablejs/Sortable.min.js"></script>
	<script src="/administration/assets/js/pages/nestable.init.js"></script>
	<script src="/administration/assets/js/productIndexManager.js"></script>
</body>

</html>