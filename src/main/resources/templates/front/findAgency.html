<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/front/clean/common :: cleanHead"></head>

<body class="home home-3 title-3">
	<div id="page" class="hfeed page-wrapper">
		<header id="site-header" class="site-header header-v3"
			th:replace="fragments/front/clean/common :: cleanHeader(${menuList})">
		</header>

		<div id="site-main" class="site-main mb-5">
			<div id="main-content" class="main-content">
				<div id="primary" class="content-area">
					<div id="title" class="page-title" style="background:url('/front/clean/new/b03.png');">
						<div class="section-container">
							<div class="content-title-heading">
								<h1 class="text-title-heading">
									CUSTOMER CENTERs
								</h1>
							</div>
							<div class="breadcrumbs">
								<a href="/">HOME</a><span class="delimiter"></span>대리점 찾기
							</div>
						</div>
					</div>

					<div id="content" class="site-content" role="main">
						<div class="section-padding">
							<div class="large section-container p-l-r">
								<div class="agency-block-title">
									<h2 class="agency-title">최근 검색한 대리점</h2>
								</div>
								<div class="shop-checkout">
									<div class="row" id="recent-agencies-row">
										<!-- JS로 최대 6개 카드 렌더 -->
									</div>
								</div>
							</div>

							<div class="large section-container p-l-r" style="margin-top:100px;">
								<div class="agency-block-title">
									<h2 class="agency-title">대리점 주소검색</h2>
									<p class="agency-subtitle" style="margin-bottom:0px;">희망하시는 주소 검색 혹은 가까운 대리점 찾기를 진행할 수 있습니다.</p>
									<div id="geo-permission-banner" class="d-none">
										# 위치 권한이 차단되어 가까운 대리점 기능을 사용할 수 없습니다.
										<button id="geo-help">권한 설정 방법</button>
										<button id="geo-retry">다시 시도</button>
									</div>
								</div>

								<div class="shop-checkout">
									<div class="row">
										<div class="col-xl-12 col-lg-12 col-md-12 col-12 mb-5">
											<form class="row" id="agency-search-form" onsubmit="return false;">
												<!-- Select 1: 페이지 사이즈 -->
												<div class="col-lg-2 col-sm-6">
													<div class="agency-search-select-wrapper">
														<select id="pageSizeSelect" class="agency-search-form-control">
															<option value="12">12개씩 보기</option>
															<option value="24">24개씩 보기</option>
															<option value="36">36개씩 보기</option>
															<option value="48">48개씩 보기</option>
														</select>
													</div>
												</div>

												<!-- Select 2: Province(시/도) -->
												<div class="col-lg-2 col-sm-6">
													<div class="agency-search-select-wrapper">
														<select id="provinceSelect" class="agency-search-form-control">
															<option value="">지역 선택(시/도)</option>
															<!-- 타임리프 서버사이드 바인딩(초기): -->
															<th:block th:each="p : ${provinces}">
																<option th:value="${p.id}" th:text="${p.name}"></option>
															</th:block>
														</select>
													</div>
												</div>

												<!-- Select 3: City(시) -->
												<div class="col-lg-2 col-sm-6">
													<div class="agency-search-select-wrapper">
														<select id="citySelect" class="agency-search-form-control"
															disabled>
															<option value="">지역 선택(시)</option>
														</select>
													</div>
												</div>

												<!-- Select 4: District(구/군) -->
												<div class="col-lg-2 col-sm-6">
													<div class="agency-search-select-wrapper">
														<select id="districtSelect" class="agency-search-form-control"
															disabled>
															<option value="">지역 선택(구/군)</option>
														</select>
													</div>
												</div>

												<!-- 검색 버튼 -->
												<div class="col-lg-4 col-sm-12 d-flex">
													<button type="button" id="searchBtn"
														class="agency-search-btn-custom agency-search-btn-search w-100">
														<i class="fas fa-search"></i> 검색
													</button>
													<button type="button" id="nearbyBtn"
														class="agency-search-btn-custom agency-search-btn-dealer w-100">
														<i class="fas fa-map-marker-alt"></i> 가까운대리점찾기
													</button>
												</div>
											</form>
										</div>

										<!-- 리스트 카드 컨테이너 -->
										<div class="col-12">
											<div class="row" id="agency-list-row">
												<!-- JS로 카드들 렌더 -->
											</div>
										</div>

										<!-- 페이지네이션 -->
										<div class="col-12">
											<nav class="pagination">
												<ul class="page-numbers" id="pagination">
													<!-- JS로 렌더 -->
												</ul>
											</nav>
										</div>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>

		<footer id="site-footer" class="site-footer background"
			th:replace="fragments/front/clean/common :: cleanFooter">
		</footer>
	</div>
	<!-- 모달 배경 -->
	<div class="agency-search-modal-background"></div>

	<!-- 모달 창 -->
	<div class="agency-search-modal">
		<i class="fas fa-times agency-search-close-btn" aria-hidden="true"></i>
		<div class="shop-checkout">
			<div class="row">
				<div class="col-xl-12 col-lg-12 col-md-12 col-12 mb-5">
					<div class="checkout-review-order" style="padding-top:0px;">

						<div class="checkout-payment" id="agency-content-box">
							<div class="shipping-totals shipping modal-row" id="row-address"
								style="border-top:none;padding-top:0px;">
								<h2>NAME</h2>
								<div class="subtotal-price">
									<span id="modal-agency-name"></span>
								</div>
							</div>
							<div class="shipping-totals shipping modal-row" id="row-address">
								<h2>ADDRESS</h2>
								<div class="subtotal-price">
									<span id="modal-agency-address">-</span>
								</div>
							</div>
							<!-- TEL -->
							<div class="shipping-totals shipping modal-row" id="row-tel">
								<h2>TEL</h2>
								<div class="subtotal-price">
									<span id="modal-agency-tel"></span>
								</div>
							</div>

							<!-- MOBILE -->
							<div class="shipping-totals shipping modal-row" id="row-mobile">
								<h2>MOBILE</h2>
								<div class="subtotal-price">
									<span id="modal-agency-mobile"></span>
								</div>
							</div>

							<!-- 담당자 -->
							<div class="shipping-totals shipping modal-row" id="row-staff">
								<h2>담당자</h2>
								<div class="subtotal-price">
									<span id="modal-agency-staff"></span>
								</div>
							</div>

							<!-- 카카오 지도 -->
							<div class="payment-methods methods custom-radio" style="margin-bottom:15px;">
								<div id="kakao-map" style="width:100%;height:300px;border:0;"></div>
							</div>

							<div class="form-row place-order">
								<div class="agency-btn-wrap">
									<button type="button" class="button alt agency-button" id="modal-call-btn">
										<i class="fas fa-phone-alt" aria-hidden="true"></i> 전화상담
									</button>
									<a class="button alt agency-button" id="modal-chat-btn" target="_blank"
										rel="noopener">
										<i class="fas fa-comments" aria-hidden="true"></i> 채팅상담
									</a>
								</div>
							</div>
						</div><!-- /content-box -->
					</div>
				</div>
			</div>
		</div>
	</div>


	<th:block th:replace="fragments/front/clean/common :: cleanScript"></th:block>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script th:inline="javascript">
		window.__KAKAO_JS_KEY__ = /*[[${kakaoKey}]]*/ "";
	</script>
	<script src="/front/clean/assets/js/findAgency.js"></script>
</body>

</html>